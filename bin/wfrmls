#!/usr/bin/env ruby

CONFIG_FILE_NAME = File.expand_path('~/wfrmls_config.yml')

require 'wfrmls'

address = ARGV[0]


config = nil
begin
  config = YAML::load_file(CONFIG_FILE_NAME)
rescue => e
  # TODO initialize password
  #File.open(CONFIG_FILE_NAME, 'w') do |item|
  #end
end

username = config['username']
password = config['password']

ie = Watir::Browser.new
mls = Wfrmls.new(ie, username, password)

addr = StreetAddress::US.parse(address)
if addr.nil?
  addr = StreetAddress::US.parse(address+', UT')
end

puts addr

mls.lookup_address(addr)


